<h1>Ghosts</h1>

<h3>What is it</h3>

<p>Ghosts are variables that exist only in JML but are not seen by Java. You can declare them this way:</p>

<pre><code>//@ghost int integer;
//@ghost int integerWithDefaultValue = 3;
//@ghost SomeClass name;
//@private ghost int privateInteger;
//@public ghost int publicInteger;
//@ghost int packageInteger;
//@protected ghost int protectedInteger;
</code></pre>

<h3>What it's good for</h3>

<h5>Keeping track of meta information</h5>

<p>Sometimes when proving your algorithms you might need to keep track of some meta information. A good example of it is ensuring state of your object:</p>

<pre><code>public class DataBase{
    //@public ghost boolean connected = false;

    //@requires connected == false;
    //@ensures connected == true;
    public void connect(){
        MySQL.connectStuff();
        //@set connected = true;
    } 

    //@requires connected == true;
    public String queryData(){
        return MySQL.queryData();
    }
}
</code></pre>

<p>We could assume that <code>MySQL</code> is a library class that is not proved in any way but we have to use it. We will just assume that <code>MySQL</code> is implemented correctly and blindly trust it. But we can still create a wrapper <code>DataBase</code> that will take advanted of JML. </p>

<p>We can also use ghost variables with interfaces.</p>

<pre><code>interface DataBase{
    //@public instance ghost boolean connected = false;
    //Notice that we can actually set default value!

    //@requires connected == false;
    //@ensures connected == true;
    public void connect();    

    //@requires connected == true;
    public String queryData();    
}
</code></pre>

<p>We have to use keyword <code>instance</code> when declaring ghost in interface because otherwise it would be static. Variables in interfaces are static by default!</p>

<h5>Checking method call order</h5>

<p>Another useful example is when you need to ensure that some method was called before other.</p>

<pre><code>//@ghost boolean calledA = false;

//@ensures calledA == true;
void A(){
    //@set calledA = true;
}

//@requires calledA == true;
void B(){...}
</code></pre>
